{"version":3,"sources":["pages/Main/Components/User/User.js","pages/Main/Components/Users/Users.js"],"names":["User","props","state","userImg","user","photo","emailIsLong","userAgent","detect","parse","navigator","isWindows","test","os","family","isFirefox","browser","emailElem","document","querySelector","this","idx","scrollWidth","setState","style","cursor","Blazy","className","src","avatarPlaceholder","data-src","alt","title","name","position","Tooltip","email","placement","disableFocusListener","disableHoverListener","disableTouchListener","phone","React","Component","Users","nextPage","usersPerPage","users","fullUsersList","isLoading","requestIsFail","isNeedToFix","correctUsersPerPageChecker","body","clientWidth","getUsers","page","Axios","get","then","res","newUsers","data","total_pages","concat","catch","window","addEventListener","contentText","usersJSX","map","index","key","subtitle","onClick","Button","variant","disabled","buttonShowMore"],"mappings":"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","file":"static/js/6.1913c23d.chunk.js","sourcesContent":["import React from \"react\";\n\nimport './User.scss';\nimport avatarPlaceholder from '../../../../Shared/images/avatarPlaceholder.png';\nimport detect from \"detect.js\";\nimport Blazy from 'blazy/blazy';\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nexport default class User extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            userImg: this.props.user.photo,\n            emailIsLong: false\n        };\n\n        const userAgent = detect.parse(navigator.userAgent);\n        this.isWindows = /Windows/i.test(userAgent.os.family);\n        this.isFirefox = /Firefox/i.test(userAgent.browser.family);\n\n        this.user = this.props.user;\n    }\n\n    componentDidMount() {\n        const emailElem = document.querySelector(`.user.user${this.props.idx} .user__info-email`);\n        if (emailElem.scrollWidth < 209) return;\n\n        this.setState({emailIsLong: true});\n        emailElem.style.cursor = 'pointer';\n    }\n\n    render() {\n        let bLazy = new Blazy();\n\n\n        return (\n            <div className={`user user${this.props.idx}`}>\n                <img className=\"user__photo b-lazy\" src={avatarPlaceholder} data-src={this.user.photo} alt=\"user\"/>\n                <div className=\"user__info\">\n                    <div\n                        className={`user__info-name${this.isWindows || this.isFirefox ? ' overpassFixUserName' : ''}`}\n                        title={this.user.name}\n                    >{this.user.name}</div>\n                    <div className=\"user__info-position\">{this.user.position}</div>\n                    <Tooltip\n                        title={this.user.email}\n                        placement=\"bottom\"\n                        disableFocusListener={!this.state.emailIsLong}\n                        disableHoverListener={!this.state.emailIsLong}\n                        disableTouchListener={!this.state.emailIsLong}\n                    >\n                        <p className=\"user__info-email\">{this.user.email}</p>\n                    </Tooltip>\n                    <div className=\"user__info-phone\">{this.user.phone}</div>\n                </div>\n\n            </div>\n        )\n    }\n}","import React from 'react';\nimport Axios from \"axios\";\nimport User from \"../User/User\";\n\nimport './Users.scss';\nimport '../../../../Shared/Scss/buttons.scss';\nimport Button from \"@material-ui/core/Button\";\nimport detect from \"detect.js\";\n\nexport default class Users extends React.Component {\n    constructor(props) {\n        super(props);\n        const maxMobileSize = 755;\n\n        this.state = {\n            nextPage: 1,\n            usersPerPage: 6,\n            users: [],\n            fullUsersList: false,\n            isLoading: false,\n            requestIsFail: false\n        };\n\n        const userAgent = detect.parse(navigator.userAgent);\n        this.isNeedToFix = /Windows|Android/i.test(userAgent.os.family);\n        this.isFirefox = /Firefox/i.test(userAgent.browser.family);\n\n        this.correctUsersPerPageChecker = () => {\n            if (document.body.clientWidth > maxMobileSize) {\n                this.setState({\n                    usersPerPage: 6,\n                });\n                return 6;\n            };\n\n            this.setState({\n                usersPerPage: 3,\n            });\n            return 3;\n        };\n\n        this.getUsers = (page, usersPerPage) => {\n            if(this.state.fullUsersList || this.state.isLoading) return;\n            this.setState({ isLoading: true });\n\n            Axios.get(`https://frontend-test-assignment-api.abz.agency/api/v1/users?page=${page}&count=${usersPerPage}`).then(res => {\n                const newUsers = res.data.users;\n                const fullUsersList = res.data.page >= res.data.total_pages;\n                this.setState((state) => {\n                    const users = state.users.concat(newUsers);\n\n                    return {\n                        fullUsersList: fullUsersList,\n                        nextPage: ++state.nextPage,\n                        users: users,\n                    }\n                });\n            }).catch(() => {\n                this.setState({requestIsFail: true});\n            });\n\n            this.setState({ isLoading: false });\n        };\n    }\n\n    componentDidMount() {\n        const usersPerPage = this.correctUsersPerPageChecker();\n        this.getUsers(this.state.nextPage, usersPerPage);\n\n        window.addEventListener(\"resize\", this.correctUsersPerPageChecker);\n    }\n\n    render() {\n        const contentText = this.props.contentText;\n        const usersJSX = this.state.users.map((user, index) => {\n            return <User key={index} idx={index} user={user} />\n        });\n\n        return (\n            <section className={`users${this.state.requestIsFail ? ' requestIsFail' : ''}`}>\n                <div className=\"users__container\">\n                    <h2 className={`users__title heading2${this.isNeedToFix || this.isFirefox ? ' overpassFix' : ''}`}>{contentText.title}</h2>\n                    <h5 className=\"users__subtitle heading5\">{contentText.subtitle}</h5>\n                    <div className=\"users__list\">\n                        {usersJSX}\n                    </div>\n                    <div onClick={() => this.getUsers(this.state.nextPage, this.state.usersPerPage)} className=\"users__button-show-more button\">\n                        <Button\n                            variant=\"contained\"\n                            className={`button-item button-item_secondary${this.state.fullUsersList || this.state.isLoading ? ' disabled' : ''}`}\n                            disabled={this.state.fullUsersList}\n                        >\n                            {contentText.buttonShowMore}\n                        </Button>\n                    </div>\n                </div>\n            </section>\n        )\n    }\n}"],"sourceRoot":""}